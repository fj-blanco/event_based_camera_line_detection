# Event based line detection

This project is an exploratory effort to understand and test event-based algorithms in the context of the Robot Operating System (ROS) by simulating event-based messages published to a topic from frame-based sensors.

## Table of contents
* [Software used](#software-used)
* [Description](#description)
  * [Simulating event-based perception](#simulating-event-based-perception)
  * [Line detection](#line-detection)
* [Setup](#setup)
* [To-do's](#to-dos)
* [References](#references)

## Software used

- Ubuntu 20.04.5 LTS
- ROS Noetic

## Description

This project is made of two main Python packages: spyke_encoder and line_detection.

### Simulating event-based perception

Inspired by [spykeCoding](https://github.com/tudelft/spykeCoding) [1]. This is an alternative implementation of the temporal contrast encoding algorithm that works directly with OpenCV images.

The spyke_encoder suscribes to a video stream being published in the /usb_cam/image_raw topic and publishes a custom message that tries to simulate the stream of events $\mathbf{e}_k =
[\mathbf{u}_k^T, t_k , p_k ]^T$ generated by a neuro-morphic camera to the /spykes_and_image topic.

These spyke events do not yet represent an asynchronous event stream but allow testing of event-based algorithms.

### Line detection

As a proof of concept, Algorithm 1 from [2] of has been implemented. This algorithm performs event-based line detection.

## Running the project:


First, you may need to install the following dependencies:
```bash
sudo apt-get install ros-noetic-perception ros-noetic-usb-cam python-numpy
```
Clone the project and in the project folder run

```bash
cd catkin_ws
catkin_make
```
to build it.
  
Then, give executable permissions to the launch scripts and run
```bash
./run_usb_cam.sh
```
for the usb_cam node,

```bash
./run_spyke_encoder.sh
```
for the spyke encoder and finally

```bash
./run_line_detection.sh
```

for the line detection node.

##  To-do's
- [x] Implement temporal contrast encoding algorithm
- [x] Implement line detection algorithm
- [ ] Improve line detection algorithm overall performance
- [ ] Testing
- [ ] Implement Event-Based Segment Detection (Algorithm 2 from [2])



# References

[1] Dupeyroux, J., Stroobants, S. and De Croon, G.C., 2022, June. A toolbox for neuromorphic perception in robotics. In *2022 8th International Conference on Event-Based Control, Communication, and Signal Processing (EBCCSP)* (pp. 1-7). IEEE.


[2] Valeiras, D.R., Clady, X., Ieng, S.H. and Benosman, R., 2018. Event-based line fitting and segment detection using a neuromorphic visual sensor. *IEEE transactions on neural networks and learning systems*, 30(4), pp.1218-1230.